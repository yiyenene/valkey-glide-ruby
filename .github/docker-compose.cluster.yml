services:
  valkey-cluster-1:
    image: valkey/valkey:8
    container_name: valkey-cluster-1
    ports:
      - "7000:7000"
      - "17000:17000"
    command: >
      valkey-server
      --port 7000
      --cluster-enabled yes
      --cluster-config-file nodes.conf
      --cluster-node-timeout 5000
      --appendonly yes
      --protected-mode no
    healthcheck:
      test: ["CMD", "valkey-cli", "-p", "7000", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  valkey-cluster-2:
    image: valkey/valkey:8
    container_name: valkey-cluster-2
    ports:
      - "7001:7001"
      - "17001:17001"
    command: >
      valkey-server
      --port 7001
      --cluster-enabled yes
      --cluster-config-file nodes.conf
      --cluster-node-timeout 5000
      --appendonly yes
      --protected-mode no
    healthcheck:
      test: ["CMD", "valkey-cli", "-p", "7001", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  valkey-cluster-3:
    image: valkey/valkey:8
    container_name: valkey-cluster-3
    ports:
      - "7002:7002"
      - "17002:17002"
    command: >
      valkey-server
      --port 7002
      --cluster-enabled yes
      --cluster-config-file nodes.conf
      --cluster-node-timeout 5000
      --appendonly yes
      --protected-mode no
    healthcheck:
      test: ["CMD", "valkey-cli", "-p", "7002", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  valkey-cluster-4:
    image: valkey/valkey:8
    container_name: valkey-cluster-4
    ports:
      - "7003:7003"
      - "17003:17003"
    command: >
      valkey-server
      --port 7003
      --cluster-enabled yes
      --cluster-config-file nodes.conf
      --cluster-node-timeout 5000
      --appendonly yes
      --protected-mode no
    healthcheck:
      test: ["CMD", "valkey-cli", "-p", "7003", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  valkey-cluster-5:
    image: valkey/valkey:8
    container_name: valkey-cluster-5
    ports:
      - "7004:7004"
      - "17004:17004"
    command: >
      valkey-server
      --port 7004
      --cluster-enabled yes
      --cluster-config-file nodes.conf
      --cluster-node-timeout 5000
      --appendonly yes
      --protected-mode no
    healthcheck:
      test: ["CMD", "valkey-cli", "-p", "7004", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

  valkey-cluster-6:
    image: valkey/valkey:8
    container_name: valkey-cluster-6
    ports:
      - "7005:7005"
      - "17005:17005"
    command: >
      valkey-server
      --port 7005
      --cluster-enabled yes
      --cluster-config-file nodes.conf
      --cluster-node-timeout 5000
      --appendonly yes
      --protected-mode no
    healthcheck:
      test: ["CMD", "valkey-cli", "-p", "7005", "ping"]
      interval: 5s
      timeout: 3s
      retries: 5

